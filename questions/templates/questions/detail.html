{% extends base_template %}
{% load questions %}

{% block content %}
    <h1>{{ question.title }}</h1>
    <div>
        {{ question.body|safe }}
    </div>
    {% tag_list question %}
    <p>Asked by <i>{% display_name question %}</i>
    </p>

    <h3>Comments:</h3>
    {% comment_list question %}

    <div>
        <label for="comment-q">Add comment</label>
        <input type="checkbox" id="comment-q" class="add-comment">

        <form action="{% url 'questions:comments:submit:q' question.pk %}" method="post" class="comment-form pure-form pure-form-stacked">
            {% csrf_token %}
            {{ comment_form.media }}
            {{ comment_form }}
            <br/>
            <button type="submit" class="pure-button pure-button-primary">Submit</button>
        </form>
    </div>

    <hr/>
    <h2>Answers:</h2>
    {% answer_list question %}
    <hr/>

    {% if user.is_authenticated %}
        <form action="{% url 'questions:answers:submit' question.pk %}" method="post" class="pure-form pure-form-stacked">
            {% csrf_token %}
            {{ answer_form.media }}
            {{ answer_form }}
            <br/>
            <button type="submit" class="pure-button pure-button-primary">Submit</button>
        </form>
    {% else %}
        <p>Please <a href="{% url 'login' %}">log in</a> to answer questions.</p>
    {% endif %}

{% endblock %}